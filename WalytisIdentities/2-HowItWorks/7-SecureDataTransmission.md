WalytisIdentities provides encrypted direct peer-to-peer data transmission capabilities between members of a [5-GroupDidManager](5-GroupDidManager.md) by leveraging WalytisIdentities' cryptography.

## Protocol

The data transmission protocol used is session-oriented peer-to-peer [IPFS-Toolkit python library](https://github.com/emendir/IPFS-Toolkit-Python/)'s [`Conversation` ](https://github.com/emendir/IPFS-Toolkit-Python/blob/kubo_python/src/ipfs_tk/ipfs_tk_transmission/conversations.py) protocol.
This creates TCP tunnels between peers using IPFS/libp2p, over which data packages of arbitrary size and files can be transmitted in any direction repeatedly.

## Authentication

During the session handshake, each peer presents the other peer with an authentication challenge:
- each peer generates a random string that is transmitted to the other peer in plain text
- upon receiving this challenge's random string, a peer signs it with the GroupDidManager control key and with his own member DidManager's control key, sending the signatures back to the challenging peer
- Upon receiving the signatures from the challenged peer, the signatures are verified against the known GroupDidManager and member DidManager's public keys. The validity of these keys are also verified, ensuring they are not older keys that have already been replaced.

## Encryption

During the session initiation handshake, each peer generates an asymmetric key pari and shares the public key to the other peer.
After the session initiation handshake, the each data transmission is encrypted three times:
- the control key of the GroupDidManager
- the control key the member DidManager who is recipient of the transmission
- the public key generated by the recipient peer 

The use of the GroupDidManager and member DidManager keys provide two layers of targeted confidentiality in addition the the authentication process in the session handshake, ensuring that only the intended recipient can read the messages, and that the intended recipient is indeed a member of the GroupDidManager.

The per-session generated public key serves to ensure that no communication session uses exactly the same set of keys, providing perfect forward and backward secrecy for intercepted transmissions should the keys of one session be compromised, as well as ensuring confidentiality should a malicious transmissions-interceptor have compromised the GroupDidManager and member DidManager keys.


In the future, multiple different cryptographic algorithms will be used at the same time to provide resistance to zero-day vulnerabilities in cryptographic algorithms #TODO.